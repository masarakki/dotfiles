#!/bin/sh

user=`git config github.user`
git remote show ${user} > /dev/null 2>&1
has_repo=$?

git fetch --all --prune
modified=`git status | grep modified | wc -l`
if [ $modified -gt 0 ] ; then git stash ; fi
git pull --rebase origin master
if [ has_repo = 0 ] ; then git push ${user} master; fi
if [ $modified -gt 0 ] ; then git stash pop ; fi
